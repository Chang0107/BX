# 專題「冰箱」— 升級分工說明 (3～4 人)

本文件說明成員角色、負責範圍與主要檔案，方便分工與介面銜接。

---

## 角色一：影像辨識

**目標**：讓冰箱內鏡頭穩定、準確地辨識物品並回傳數量。

| 項目 | 說明 |
|------|------|
| 主要檔案 | `PC.py` |
| 負責範圍 | YOLO 偵測、Gemini 辨識、攝影機串流、光線/角度適應、辨識結果送往 Server |
| 升級方向 | 提升辨識率、支援更多品項、低光源/反光處理、與「校正基準」的銜接 |

**與他人銜接**：辨識結果透過 Socket/API 送給後端；需了解後端提供的「校正基準」格式，以便比對或重設。

---

## 角色二：介面／UX/UI

**目標**：操作端好用、好懂，即時數量一目了然，掃碼校正流程順暢。

| 項目 | 說明 |
|------|------|
| 主要檔案 | `pos/index.html`、`pos/app.js`、`receiver.html`（可視需求加入其他頁面） |
| 負責範圍 | 版面、流程、視覺、互動、響應式、無障礙；「即時數量」與「掃碼校正」的介面設計 |
| 升級方向 | 冰箱情境的 UI、校正步驟引導、狀態提示（如：鏡頭失準請掃碼校正）、Google Sheets 設定體驗 |

**與他人銜接**：透過 Socket.IO / API 與後端溝通；校正時送出的資料格式需與「後端／資料與整合」約定一致。

---

## 角色三：後端與即時同步

**目標**：伺服器穩定、即時同步可靠，資料結構清楚，方便前後端與 AI 端串接。

| 項目 | 說明 |
|------|------|
| 主要檔案 | `server.js`、`inventory.json`、`history.json`（結構與讀寫邏輯） |
| 負責範圍 | Express 路由、Socket.IO 事件、庫存 CRUD、即時推播給各端、API 設計 |
| 升級方向 | 事件命名與 payload 規範、錯誤處理、簡單權限或連線管理、效能與擴充性 |

**與他人銜接**：提供「AI 端上報數量」「POS 校正/掃碼更新」的 API/事件；與「資料與整合」共同定義庫存與歷史的欄位。

---

## 角色四：資料與整合（校正流程、Google Sheets）

**目標**：掃碼校正邏輯正確、資料一致，與 Google 試算表整合穩定。

| 項目 | 說明 |
|------|------|
| 主要檔案 | 與 `server.js` 中的庫存/歷史邏輯、POS 的 Google Sheets 相關程式、條碼與品項對應 |
| 負責範圍 | 「掃碼 → 校正數量」的業務邏輯、庫存與歷史資料欄位設計、Google Sheets 匯出/同步、條碼與品項對照 |
| 升級方向 | 校正流程可追溯、衝突處理（同時 AI 更新與手動校正）、備份與還原、試算表欄位與權限 |

**與他人銜接**：與後端一起訂好 API/事件格式；與介面協作「校正」按鈕與步驟；必要時提供「品項－條碼」對照給影像辨識參考。

---

## 若只有 3 人

可將 **角色三（後端與即時同步）** 與 **角色四（資料與整合）** 合併為一人，負責：

- `server.js`、庫存/歷史、Socket.IO、API  
- 掃碼校正邏輯、Google Sheets、資料結構與欄位  

介面與影像辨識仍各一人，共 3 人。

---

## 建議協作方式

1. **共同約定**：事件名稱（如 `inventory-update`、`barcode-correction`）、API 路徑、payload 格式，寫在 README 或本文件。
2. **介面契約**：後端先定義「校正」API/事件的 request/response，介面與資料負責人依此實作。
3. **版本與分支**：可依角色開分支（如 `feat/vision`、`feat/ui`、`feat/backend`），定期合併到主線並測試端對端流程。

如需，可把上述角色與檔案對照寫進 `README.md` 的「專題分工」小節，方便新成員快速對應。
